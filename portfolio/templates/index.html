{% extends 'base.html' %}

{% block title %}{{ data.hero.name }} | {{ data.hero.role }}{% endblock %}

{% block navbar %}
  {% include 'navbar.html' %}
{% endblock %}

{% block meta %}
  <meta name="description" content="{{ data.hero.name }} — {{ data.hero.role }}" />
  <meta property="og:title" content="{{ data.hero.name }} - Developer Portfolio" />
  <meta property="og:description" content="{{ data.hero.blurb }}" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="{{ data.hero.avatar_image }}" />
{% endblock %}

{% block content %}

  {# ==============================
     Section: Hero
  ============================== #}
  <section id="main" class="hero">
    <div class="hero__grid">

      <div class="hero__text">
        <h1 class="hero__title">
          <span class="hero__hi">{{ data.hero.hi_text }}</span>
          <span class="hero__name">{{ data.hero.name }}</span>
        </h1>

        <p class="hero__role">{{ data.hero.role }}</p>

        <p class="hero__blurb">
          {{ data.hero.blurb }}
        </p>

        <div class="hero__cta">
          <a class="btn-main" href="#contact" aria-label="Go to contact">
            <i data-lucide="mail" aria-hidden="true"></i>
            <span>Get in touch</span>
          </a>
        </div>
      </div>

      <div class="hero__avatar">
        <div class="hero__ring hero__ring--outer"></div>
        <img
          src="{{ data.hero.avatar_image or url_for('portfolio.static', filename='images/hero-portrait-muthu.jpg') }}"
          alt="Portrait of {{ data.hero.name }}"
          width="640" height="640"
          decoding="sync" loading="eager" fetchpriority="high"
        >
      </div>

    </div>
  </section>

  {# ==============================
     Section: About
  ============================== #}
  <section id="about" class="about-section">
    <div class="bg-pattern"></div>

    <div class="about__grid-layout">

      <div class="about__content">
        <h2 class="section-title">{{ data.about.title }}</h2>

        <div class="about__story">
          {{ data.about.content | safe }}
        </div>

        <div class="about__actions">
          <a href="{{ url_for('portfolio.static', filename='files/muthukumaran-resume.pdf') }}" class="btn-main" target="_blank" rel="noopener">
            <i data-lucide="file-text"></i>
            <span>Resume</span>
          </a>
          <div class="status-indicator">
            <span class="status-dot pulse"></span>
            {{ data.about.status }}
          </div>
        </div>
      </div>

      <div class="about__visual">
        <div class="stack-wrapper">
          <div class="stack-label">
            <span class="comment-syntax"># Languages & Tools</span>
          </div>

          <div class="tech-glass-panel">
            <div class="tech-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>

              <span class="tech-title">package.json</span>
            </div>

            <div class="tech-grid">
              {% for tech in data.tech_stack %}
              <div class="tech-item">
                <i class="{{ tech.icon }}" aria-hidden="true"></i>
                <span>{{ tech.name }}</span>
              </div>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  {# ==============================
     Section: Featured Projects
  ============================== #}
  <section id="projects" class="section-wrapper projects-section">
    <div class="container">

      <div class="section-header">
        <h2 class="section-title">Featured Projects</h2>
        <p class="section-subtitle">
          High-impact applications built with modern web technologies.
        </p>
      </div>

      <div class="projects-stack">
        {% for p in featured_main %}
        <article class="project-card" id="project-{{ p.id | replace(' ', '-') | lower }}">

          <div class="project-card__media">
            {#
               1. Link points to internal project_detail (as requested originally).
               2. Includes ?from=home for the back button logic.
               3. No target="_blank" so it opens in the same tab.
            #}
            <a href="{{ url_for('portfolio.project_detail', project_id=p.id, from='home') }}" class="media-inner" rel="noopener">
              {% if p.tagline %}
              <div class="media-hook">
                <span>{{ p.tagline }}</span>
                <i data-lucide="arrow-up-right" class="hook-arrow" aria-hidden="true"></i>
              </div>
              {% endif %}

              <div class="media-image-container">
                <img src="{{ p.image or url_for('portfolio.static', filename='assets/images/project-placeholder-card.png') }}"
                     alt="{{ p.title }} Preview" loading="lazy" decoding="async">
              </div>
            </a>
          </div>

          <div class="project-card__content">
            <h3 class="project-title">{{ p.title }}</h3>
            <p class="project-desc">{{ p.desc }}</p>

            {% if p.highlights %}
            <ul class="project-highlights" aria-label="Highlights for {{ p.title }}">
              {% for item in p.highlights %}
              <li><i data-lucide="check-circle-2" class="bullet-icon"></i> {{ item }}</li>
              {% endfor %}
            </ul>
            {% endif %}

            <div class="project-tags">
              {% for t in p.tags %}
              <span class="tech-badge">{{ t }}</span>
              {% endfor %}
            </div>

            {# Buttons reverted to Original Style (btn-main) and External Links #}
            <div class="project-actions">
              {% if p.live_url %}
              <a href="{{ p.live_url }}" target="_blank" rel="noopener" class="btn-main" aria-label="Live Demo">
                <i data-lucide="external-link" aria-hidden="true"></i>
                <span>Live Demo</span>
              </a>
              {% endif %}

              {% if p.code_url %}
              <a href="{{ p.code_url }}" target="_blank" rel="noopener noreferrer" class="btn-main" aria-label="Source Code">
                <i data-lucide="github" aria-hidden="true"></i>
                <span>Code</span>
              </a>
              {% endif %}
            </div>
          </div>

        </article>
        {% endfor %}
      </div>

      <div class="section-footer">
        <a href="{{ url_for('portfolio.all_projects') }}" class="link-archive">
          View Full Project Archive
        </a>
      </div>

    </div>
  </section>

  {# ==============================
     Section: Awards & Honours
  ============================== #}
  <section id="awards" class="section-wrapper awards-section">
    <div class="container">

      <div class="section-header">
        <h2 class="section-title">Honours & Awards</h2>
        <p class="section-subtitle">Academic milestones and competitive programming highlights.</p>
      </div>

      <div class="awards-grid">
        {% for ach in data.achievements %}
        <article class="award-card">
          <div class="award-card__icon">
            <i data-lucide="{{ ach.icon }}" aria-hidden="true"></i>
          </div>
          <h3 class="award-card__title">{{ ach.title }}</h3>
          <p class="award-card__desc">
            {{ ach.description }}
          </p>
          <div class="award-card__meta">
            {% for meta in ach.meta %}
            <span class="meta-pill">{{ meta }}</span>
            {% endfor %}
          </div>
        </article>
        {% endfor %}
      </div>

    </div>
  </section>

  {# ==============================
     Section: Contact
  ============================== #}
  <section id="contact" class="section-wrapper contact-section">
    <div class="container">

      <div class="contact-layout">
        <aside class="contact-info">
          <h2 class="section-title">Let’s Build Something Great</h2>
          <p class="contact-subtitle">
            Open to full-time roles and internships in full-stack development.
            Reach out via email or social media.
          </p>

          <nav class="contact-links">
            <a class="contact-chip" href="mailto:muthu17@gmail.com">
              <i data-lucide="mail"></i> <span>muthu17@gmail.com</span>
            </a>
            <a class="contact-chip" href="https://github.com/" target="_blank">
              <i data-lucide="github"></i> <span>GitHub</span>
            </a>
            <a class="contact-chip" href="https://linkedin.com/" target="_blank">
              <i data-lucide="linkedin"></i> <span>LinkedIn</span>
            </a>
          </nav>
        </aside>

        <div class="contact-form-wrapper">
          <form class="contact-form" method="POST" action="{{ url_for('portfolio.contact') }}">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

            <div class="form-row">
              <div class="form-field">
                <input id="name" name="name" type="text" placeholder=" " required>
                <label for="name">Your Name</label>
              </div>
              <div class="form-field">
                <input id="email" name="email" type="email" placeholder=" " required>
                <label for="email">Email</label>
              </div>
            </div>

            <div class="form-field">
              <textarea id="message" name="message" placeholder=" " required></textarea>
              <label for="message">Message</label>
            </div>

            <button type="submit" class="btn-main">
              <i data-lucide="send"></i>
              <span>Send Message</span>
            </button>
          </form>
        </div>
      </div>

    </div>
  </section>

{% endblock %}